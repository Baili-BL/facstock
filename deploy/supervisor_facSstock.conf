# ============================================
# Supervisor 配置文件
# 位置: /etc/supervisor/conf.d/facSstock.conf
# ============================================

[program:facSstock]
# 应用配置
command=/opt/facSstock/venv/bin/gunicorn -w 2 -b 0.0.0.0:5001 app:app
directory=/opt/facSstock
user=www-data

# 自动启动和重启
autostart=true
autorestart=true
startsecs=5
startretries=3

# 日志配置
stdout_logfile=/opt/facSstock/logs/supervisor_out.log
stderr_logfile=/opt/facSstock/logs/supervisor_err.log
stdout_logfile_maxbytes=50MB
stderr_logfile_maxbytes=50MB
stdout_logfile_backups=10
stderr_logfile_backups=10

# 环境变量
environment=PYTHONUNBUFFERED=1

# ============================================
# 如需部署多个应用，复制以下配置并修改端口
# ============================================

# [program:facSstock_app2]
# command=/opt/facSstock_app2/venv/bin/gunicorn -w 2 -b 0.0.0.0:5002 app:app
# directory=/opt/facSstock_app2
# user=www-data
# autostart=true
# autorestart=true
# stdout_logfile=/opt/facSstock_app2/logs/supervisor_out.log
# stderr_logfile=/opt/facSstock_app2/logs/supervisor_err.log

# [program:facSstock_app3]
# command=/opt/facSstock_app3/venv/bin/gunicorn -w 2 -b 0.0.0.0:5003 app:app
# directory=/opt/facSstock_app3
# user=www-data
# autostart=true
# autorestart=true
# stdout_logfile=/opt/facSstock_app3/logs/supervisor_out.log
# stderr_logfile=/opt/facSstock_app3/logs/supervisor_err.log
